<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–∏—Å–∫ –≥—Ä—É–ø–ø—ã MP24 –≤ Telegram</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .step {
            background: #e9ecef;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #28a745;
        }
        .step h3 {
            margin-top: 0;
            color: #28a745;
        }
        .code {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            border: 1px solid #dee2e6;
            margin: 10px 0;
        }
        button {
            background: #28a745;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #218838;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            white-space: pre-wrap;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        input {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .group-info {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            border: 1px solid #b3d9ff;
        }
        .warning {
            background: #fff3cd;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            border: 1px solid #ffeaa7;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç –ü–æ–∏—Å–∫ –≥—Ä—É–ø–ø—ã MP24 –≤ Telegram</h1>
        
        <div class="warning">
            <strong>‚ö†Ô∏è –í–∞–∂–Ω–æ:</strong> –î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –≥—Ä—É–ø–ø—É –±–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω –≤ –≥—Ä—É–ø–ø—É –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∏–ª–∏ —É—á–∞—Å—Ç–Ω–∏–∫.
        </div>

        <div class="step">
            <h3>1Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–æ—Ç–∞</h3>
            <input type="text" id="botToken" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ (123456789:ABC...)">
            <button onclick="testBot()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–æ—Ç–∞</button>
        </div>

        <div class="step">
            <h3>2Ô∏è‚É£ –ù–∞–π–¥–∏—Ç–µ –≥—Ä—É–ø–ø—É MP24</h3>
            <p><strong>–°–ø–æ—Å–æ–± 1:</strong> –ù–∞–π–¥–∏—Ç–µ –≥—Ä—É–ø–ø—É –≤ Telegram –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é "MP24"</p>
            <p><strong>–°–ø–æ—Å–æ–± 2:</strong> –ï—Å–ª–∏ –∑–Ω–∞–µ—Ç–µ username –≥—Ä—É–ø–ø—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä: @mp24_group)</p>
            <input type="text" id="groupUsername" placeholder="–í–≤–µ–¥–∏—Ç–µ username –≥—Ä—É–ø–ø—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä: @mp24_group)">
            <button onclick="findGroup()">–ù–∞–π—Ç–∏ –≥—Ä—É–ø–ø—É</button>
        </div>

        <div class="step">
            <h3>3Ô∏è‚É£ –ü–æ–ª—É—á–∏—Ç–µ Chat ID –≥—Ä—É–ø–ø—ã</h3>
            <button onclick="getGroupChatId()">–ü–æ–ª—É—á–∏—Ç—å Chat ID –≥—Ä—É–ø–ø—ã</button>
            <p><strong>–ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ Chat ID –≤—Ä—É—á–Ω—É—é:</strong></p>
            <input type="text" id="groupChatId" placeholder="Chat ID –≥—Ä—É–ø–ø—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä: -123456789)">
        </div>

        <div class="step">
            <h3>4Ô∏è‚É£ –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</h3>
            <button onclick="sendTestToGroup()">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç –≤ –≥—Ä—É–ø–ø—É</button>
        </div>

        <div class="step">
            <h3>5Ô∏è‚É£ –û–±–Ω–æ–≤–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∞–π—Ç–∞</h3>
            <p>–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ Chat ID –∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª <code>script.js</code>:</p>
            <div class="code" id="codeToCopy">
const TELEGRAM_BOT_TOKEN = '–í–ê–®_–¢–û–ö–ï–ù';
const TELEGRAM_CHAT_ID = '–í–ê–®_CHAT_ID_–ì–†–£–ü–ü–´';
            </div>
            <button onclick="copyCode()">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥</button>
        </div>

        <div id="result" class="result" style="display: none;"></div>
    </div>

    <script>
        let botToken = '';
        let groupChatId = '';

        async function testBot() {
            const token = document.getElementById('botToken').value.trim();
            if (!token) {
                showResult('‚ùå –í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞', false);
                return;
            }

            botToken = token;

            try {
                const response = await fetch(`https://api.telegram.org/bot${token}/getMe`);
                const data = await response.json();
                
                if (data.ok) {
                    showResult(`‚úÖ –ë–æ—Ç –Ω–∞–π–¥–µ–Ω: ${data.result.first_name}\nUsername: @${data.result.username}`, true);
                } else {
                    showResult(`‚ùå –û—à–∏–±–∫–∞ –±–æ—Ç–∞: ${data.description}`, false);
                }
            } catch (error) {
                showResult(`‚ùå –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ${error.message}`, false);
            }
        }

        async function findGroup() {
            const username = document.getElementById('groupUsername').value.trim();
            if (!username) {
                showResult('‚ùå –í–≤–µ–¥–∏—Ç–µ username –≥—Ä—É–ø–ø—ã', false);
                return;
            }

            if (!botToken) {
                showResult('‚ùå –°–Ω–∞—á–∞–ª–∞ –≤–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞', false);
                return;
            }

            try {
                const response = await fetch(`https://api.telegram.org/bot${botToken}/getChat`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({chat_id: username})
                });
                
                const data = await response.json();
                
                if (data.ok) {
                    const chat = data.result;
                    groupChatId = chat.id;
                    document.getElementById('groupChatId').value = groupChatId;
                    
                    showResult(`‚úÖ –ì—Ä—É–ø–ø–∞ –Ω–∞–π–¥–µ–Ω–∞!\n–ù–∞–∑–≤–∞–Ω–∏–µ: ${chat.title}\nChat ID: ${chat.id}\n–¢–∏–ø: ${chat.type}`, true);
                } else {
                    showResult(`‚ùå –ì—Ä—É–ø–ø–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞: ${data.description}`, false);
                }
            } catch (error) {
                showResult(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, false);
            }
        }

        async function getGroupChatId() {
            if (!botToken) {
                showResult('‚ùå –°–Ω–∞—á–∞–ª–∞ –≤–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞', false);
                return;
            }

            try {
                const response = await fetch(`https://api.telegram.org/bot${botToken}/getUpdates`);
                const data = await response.json();
                
                if (data.ok && data.result.length > 0) {
                    // –ò—â–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –≥—Ä—É–ø–ø
                    const groupMessages = data.result.filter(update => 
                        update.message && 
                        update.message.chat && 
                        update.message.chat.type === 'group' &&
                        update.message.chat.title && 
                        update.message.chat.title.toLowerCase().includes('mp24')
                    );
                    
                    if (groupMessages.length > 0) {
                        const chatId = groupMessages[0].message.chat.id;
                        groupChatId = chatId;
                        document.getElementById('groupChatId').value = chatId;
                        showResult(`‚úÖ –ì—Ä—É–ø–ø–∞ MP24 –Ω–∞–π–¥–µ–Ω–∞!\nChat ID: ${chatId}`, true);
                    } else {
                        showResult('‚ùå –ì—Ä—É–ø–ø–∞ MP24 –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –≥—Ä—É–ø–ø—É –∏ –≤ –≥—Ä—É–ø–ø–µ –µ—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è.', false);
                    }
                } else {
                    showResult('‚ùå –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –≥—Ä—É–ø–ø—É.', false);
                }
            } catch (error) {
                showResult(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, false);
            }
        }

        async function sendTestToGroup() {
            const token = botToken || document.getElementById('botToken').value.trim();
            const chatId = groupChatId || document.getElementById('groupChatId').value.trim();
            
            if (!token || !chatId) {
                showResult('‚ùå –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –∏ Chat ID –≥—Ä—É–ø–ø—ã', false);
                return;
            }

            try {
                const message = `üß™ –¢–ï–°–¢–û–í–û–ï –°–û–û–ë–©–ï–ù–ò–ï –í –ì–†–£–ü–ü–£ MP24

üë§ –ò–º—è: –¢–µ—Å—Ç –¢–µ—Å—Ç–æ–≤
üìû –¢–µ–ª–µ—Ñ–æ–Ω: +375 (29) 284-84-34
üè† –ê–¥—Ä–µ—Å: –ú–∏–Ω—Å–∫, —É–ª. –¢–µ—Å—Ç–æ–≤–∞—è 1
üîß –£—Å–ª—É–≥–∞: –£—Å—Ç–∞–Ω–æ–≤–∫–∞
üí¨ –°–æ–æ–±—â–µ–Ω–∏–µ: –¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã –≤ –≥—Ä—É–ø–ø–µ
üïí –í—Ä–µ–º—è: ${new Date().toLocaleString('ru-RU')}`;

                const response = await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: chatId,
                        text: message,
                        parse_mode: 'HTML'
                    })
                });

                const data = await response.json();
                
                if (data.ok) {
                    showResult('‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –≥—Ä—É–ø–ø—É MP24!\n–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥—Ä—É–ø–ø—É –≤ Telegram.', true);
                } else {
                    showResult(`‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏: ${JSON.stringify(data, null, 2)}`, false);
                }
            } catch (error) {
                showResult(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, false);
            }
        }

        function copyCode() {
            const chatId = groupChatId || document.getElementById('groupChatId').value.trim();
            const token = botToken || document.getElementById('botToken').value.trim();
            
            if (!token || !chatId) {
                showResult('‚ùå –°–Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –∏ Chat ID', false);
                return;
            }

            const code = `const TELEGRAM_BOT_TOKEN = '${token}';
const TELEGRAM_CHAT_ID = '${chatId}';`;
            
            document.getElementById('codeToCopy').textContent = code;
            
            navigator.clipboard.writeText(code).then(() => {
                showResult('‚úÖ –ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!\n–¢–µ–ø–µ—Ä—å –≤—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ –≤ —Ñ–∞–π–ª script.js', true);
            }).catch(() => {
                showResult('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –≤—Ä—É—á–Ω—É—é –∏–∑ –ø–æ–ª—è –≤—ã—à–µ.', false);
            });
        }

        function showResult(message, isSuccess) {
            const resultDiv = document.getElementById('result');
            resultDiv.textContent = message;
            resultDiv.className = `result ${isSuccess ? 'success' : 'error'}`;
            resultDiv.style.display = 'block';
        }
    </script>
</body>
</html>
